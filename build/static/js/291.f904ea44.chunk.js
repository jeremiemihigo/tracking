(self.webpackChunkfront=self.webpackChunkfront||[]).push([[291],{747348:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var n=s(625979),r=s(102660),i=s(702046),a=s(489379),l=s(409950),c=s(914949),d=s(916233),o=function(e,t){return l.createElement(d.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:c.A}))};const u=l.forwardRef(o);var h=s(244414);const x=e=>{let{label:t,setValue:s,value:a,showIcon:l}=e;return(0,h.jsx)(n.A,{sx:{width:"100%"},children:(0,h.jsx)(r.A,{size:"small",id:"header-search",startAdornment:(0,h.jsx)(i.A,{position:"start",sx:{mr:-.5},children:l&&(0,h.jsx)(u,{})}),"aria-describedby":"header-search-text",inputProps:{"aria-label":"weight"},value:a,onChange:e=>s(e.target.value),placeholder:t})})}},98291:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var n=s(965471),r=s(244414);const i=(0,n.A)((0,r.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}),"FileCopy");var a=s(719223),l=s(902235),c=s(260899),d=s(783274),o=s(182053),u=s(582917),h=s(314136),x=s(541233),f=s(29246),m=s(747348),p=s(504159),g=s.n(p),A=s(541397),j=s.n(A),y=s(409950),$=s(315770),v=s(689505);const S=function(){const[e,t]=y.useState(""),[s,n]=y.useState(),[p,A]=y.useState("start"),[S,b]=x.Ay.useMessage(),w=async t=>{t.preventDefault(),A("loading");try{const t=await f.A.post($.wp+"/history",{codeclient:e},$.$W);201===t.status&&(s=t.data,r="error",S.open({type:r,content:""+s,duration:3})),200===t.status&&n(t.data)}catch(i){console.log(i)}var s,r};y.useEffect((()=>{s&&A(Object.keys(j().groupBy(s,"month")))}),[s]);const N=(e,t)=>"begin"===t?(console.log(j().filter(s,{month:e})),j().filter(s,{month:e})[0].begin.title):j().filter(s,{month:e})[0][""+t],M=e=>{let t=[],n=j().filter(s,{month:e});for(let s=0;s<n.length;s++)n[s].delaiPrevu&&t.push({...n[s],sla:(0,$.Hl)(n[s]),id:s});return console.log(t),t},D=[{field:"dateFin",headerName:"Date",width:50,editable:!1,renderCell:e=>g()(e.row.dateFin).format("DD/MM")},{field:"codeAgent",headerName:"Nom",width:100,editable:!1},{field:"action",headerName:"Statut",width:140,editable:!1},{field:"feedbackSelect",headerName:"Action select",width:140,editable:!1},{field:"commentaire",headerName:"Commentaire",width:200,editable:!1},{field:"sla",headerName:"SLA",width:50,editable:!1,renderCell:e=>"INSLA"===e.row.sla?(0,r.jsx)("p",{style:{background:"#619f62",color:"#fff",fontSize:"9px",padding:"2px",borderRadius:"5px"},children:"INSLA"}):(0,r.jsx)("p",{style:{background:"#971a0b",color:"#fff",fontSize:"10px",padding:"2px",borderRadius:"5px"},children:"OUTSLA"})},{field:"day",headerName:"Day",width:50,editable:!1,renderCell:e=>(0,r.jsx)("p",{style:{background:"INSLA"===e.row.sla?"#619f62":"#971a0b",color:"#fff",width:"100%",textAlign:"center",fontSize:"10px",padding:"2px",borderRadius:"5px"},children:"".concat((0,$.xE)(e.row.dateFin,e.row.dateDebut),"/").concat(e.row.delaiPrevu)})}],_=()=>(0,r.jsx)(u.A,{variant:"text",sx:{fontSize:"1rem",marginLeft:"5px"}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.A,{sx:{padding:"5px"},children:[b,(0,r.jsxs)(c.Ay,{container:!0,children:[(0,r.jsx)(c.Ay,{item:!0,lg:4,sx:{paddingRight:"10px"},children:(0,r.jsx)(m.A,{label:"Code client, nom du client",value:e,setValue:t,showIcon:!0})}),(0,r.jsx)(c.Ay,{item:!0,lg:1,sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(d.A,{title:"confirm the search",children:(0,r.jsx)(v.A,{onClick:e=>w(e),variant:"contained",color:"primary",children:(0,r.jsx)(a.default,{fontSize:"small"})})})}),(0,r.jsx)(c.Ay,{item:!0,lg:1,sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(d.A,{title:"Export to excel",children:(0,r.jsx)(v.A,{variant:"contained",color:"success",children:(0,r.jsx)(i,{fontSize:"small",color:"inherit"})})})})]})]}),!["loading","start"].includes(p)&&p.length>0&&p.map((e=>{var t,n;return(0,r.jsxs)(c.Ay,{container:!0,sx:{marginTop:"10px"},children:[(0,r.jsx)(c.Ay,{item:!0,lg:2,xs:12,sm:4,md:4,children:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(c.Ay,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff",borderRadius:"5px"},children:(0,r.jsx)(o.A,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:s&&(null===(t=s[0])||void 0===t?void 0:t.customer_name)})}),(0,r.jsxs)(c.Ay,{sx:{padding:"5px"},children:[(0,r.jsx)(c.Ay,{className:"month",children:null===(n=s[0])||void 0===n?void 0:n.month}),(0,r.jsxs)(c.Ay,{container:!0,children:[(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"Region"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"shop_region")})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"Shop"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"shop_name")})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"par_to_date"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"par_to_date")})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"expiry_timestamp"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"expiry_timestamp")})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"date_timestamp"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"date_timestamp")})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,xs:12,sm:12,md:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"First action"}),(0,r.jsx)(o.A,{className:"values",children:N(e,"begin")})]})]})]},e)]})}),(0,r.jsx)(c.Ay,{sx:{padding:{md:"0px 10px",sm:"0px 10px"},marginTop:{xs:"10px",lg:"0px"}},item:!0,lg:10,xs:12,sm:8,md:8,children:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(c.Ay,{sx:{padding:"5px",borderRadius:"5px"},children:(0,r.jsx)(o.A,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:"All actions of the month carried out on this client"})}),(0,r.jsx)(c.Ay,{sx:{padding:"5px",height:"18.5rem"},children:(0,r.jsx)(h.zh,{rows:M(e),columns:D,initialState:{pagination:{paginationModel:{pageSize:3}}},pageSizeOptions:[3],disableRowSelectionOnClick:!0})})]})})]},e)})),"loading"===p&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(c.Ay,{container:!0,sx:{marginTop:"10px"},children:[(0,r.jsx)(c.Ay,{item:!0,lg:2,children:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(c.Ay,{sx:{padding:"5px",backgroundColor:"#002d72",color:"#fff",borderRadius:"5px"},children:(0,r.jsx)(o.A,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:(0,r.jsx)(_,{})})}),(0,r.jsxs)(c.Ay,{sx:{padding:"5px"},children:[(0,r.jsx)(c.Ay,{className:"month",children:(0,r.jsx)(_,{})}),(0,r.jsxs)(c.Ay,{container:!0,children:[(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"Region"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"Shop"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"par_to_date"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]})]}),(0,r.jsxs)(c.Ay,{container:!0,children:[(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"expiry_timestamp"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]}),(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"date_timestamp"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]})]}),(0,r.jsx)(c.Ay,{container:!0,children:(0,r.jsxs)(c.Ay,{item:!0,lg:12,className:"grid",children:[(0,r.jsx)(o.A,{className:"title",children:"First action"}),(0,r.jsx)(o.A,{className:"values",children:(0,r.jsx)(_,{})})]})})]})]})}),(0,r.jsx)(c.Ay,{item:!0,lg:8,children:(0,r.jsxs)(l.A,{sx:{marginLeft:"10px"},children:[(0,r.jsx)(c.Ay,{sx:{padding:"5px",borderRadius:"5px"},children:(0,r.jsx)(o.A,{sx:{fontSize:"12px",fontWeight:"bolder"},noWrap:!0,children:"All the actions of this month"})}),(0,r.jsx)(c.Ay,{sx:{padding:"5px"},children:(0,r.jsx)(u.A,{variant:"rounded",width:"100%",height:120})})]})})]})})]})}},504159:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,s=36e5,n="millisecond",r="second",i="minute",a="hour",l="day",c="week",d="month",o="quarter",u="year",h="date",x="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}},g=function(e,t,s){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(s)+e},A={s:g,z:function(e){var t=-e.utcOffset(),s=Math.abs(t),n=Math.floor(s/60),r=s%60;return(t<=0?"+":"-")+g(n,2,"0")+":"+g(r,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var n=12*(s.year()-t.year())+(s.month()-t.month()),r=t.clone().add(n,d),i=s-r<0,a=t.clone().add(n+(i?-1:1),d);return+(-(n+(s-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:c,d:l,D:h,h:a,m:i,s:r,ms:n,Q:o}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},j="en",y={};y[j]=p;var $="$isDayjsObject",v=function(e){return e instanceof N||!(!e||!e[$])},S=function e(t,s,n){var r;if(!t)return j;if("string"==typeof t){var i=t.toLowerCase();y[i]&&(r=i),s&&(y[i]=s,r=i);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var l=t.name;y[l]=t,r=l}return!n&&r&&(j=r),r||!n&&j},b=function(e,t){if(v(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new N(s)},w=A;w.l=S,w.i=v,w.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var N=function(){function p(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[$]=!0}var g=p.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var r=n[2]-1||0,i=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return w},g.isValid=function(){return!(this.$d.toString()===x)},g.isSame=function(e,t){var s=b(e);return this.startOf(t)<=s&&s<=this.endOf(t)},g.isAfter=function(e,t){return b(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<b(e)},g.$g=function(e,t,s){return w.u(e)?this[t]:this.set(s,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var s=this,n=!!w.u(t)||t,o=w.p(e),x=function(e,t){var r=w.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return n?r:r.endOf(l)},f=function(e,t){return w.w(s.toDate()[e].apply(s.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},m=this.$W,p=this.$M,g=this.$D,A="set"+(this.$u?"UTC":"");switch(o){case u:return n?x(1,0):x(31,11);case d:return n?x(1,p):x(0,p+1);case c:var j=this.$locale().weekStart||0,y=(m<j?m+7:m)-j;return x(n?g-y:g+(6-y),p);case l:case h:return f(A+"Hours",0);case a:return f(A+"Minutes",1);case i:return f(A+"Seconds",2);case r:return f(A+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var s,c=w.p(e),o="set"+(this.$u?"UTC":""),x=(s={},s[l]=o+"Date",s[h]=o+"Date",s[d]=o+"Month",s[u]=o+"FullYear",s[a]=o+"Hours",s[i]=o+"Minutes",s[r]=o+"Seconds",s[n]=o+"Milliseconds",s)[c],f=c===l?this.$D+(t-this.$W):t;if(c===d||c===u){var m=this.clone().set(h,1);m.$d[x](f),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else x&&this.$d[x](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[w.p(e)]()},g.add=function(n,o){var h,x=this;n=Number(n);var f=w.p(o),m=function(e){var t=b(x);return w.w(t.date(t.date()+Math.round(e*n)),x)};if(f===d)return this.set(d,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===l)return m(1);if(f===c)return m(7);var p=(h={},h[i]=t,h[a]=s,h[r]=e,h)[f]||1,g=this.$d.getTime()+n*p;return w.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||x;var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),i=this.$H,a=this.$m,l=this.$M,c=s.weekdays,d=s.months,o=s.meridiem,u=function(e,s,r,i){return e&&(e[s]||e(t,n))||r[s].slice(0,i)},h=function(e){return w.s(i%12||12,e,"0")},f=o||function(e,t,s){var n=e<12?"AM":"PM";return s?n.toLowerCase():n};return n.replace(m,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return w.s(t.$y,4,"0");case"M":return l+1;case"MM":return w.s(l+1,2,"0");case"MMM":return u(s.monthsShort,l,d,3);case"MMMM":return u(d,l);case"D":return t.$D;case"DD":return w.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(s.weekdaysMin,t.$W,c,2);case"ddd":return u(s.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return w.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(i,a,!0);case"A":return f(i,a,!1);case"m":return String(a);case"mm":return w.s(a,2,"0");case"s":return String(t.$s);case"ss":return w.s(t.$s,2,"0");case"SSS":return w.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,h,x){var f,m=this,p=w.p(h),g=b(n),A=(g.utcOffset()-this.utcOffset())*t,j=this-g,y=function(){return w.m(m,g)};switch(p){case u:f=y()/12;break;case d:f=y();break;case o:f=y()/3;break;case c:f=(j-A)/6048e5;break;case l:f=(j-A)/864e5;break;case a:f=j/s;break;case i:f=j/t;break;case r:f=j/e;break;default:f=j}return x?f:w.a(f)},g.daysInMonth=function(){return this.endOf(d).$D},g.$locale=function(){return y[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),n=S(e,t,!0);return n&&(s.$L=n),s},g.clone=function(){return w.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},p}(),M=N.prototype;return b.prototype=M,[["$ms",n],["$s",r],["$m",i],["$H",a],["$W",l],["$M",d],["$y",u],["$D",h]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,N,b),e.$i=!0),b},b.locale=S,b.isDayjs=v,b.unix=function(e){return b(1e3*e)},b.en=y[j],b.Ls=y,b.p={},b}()}}]);