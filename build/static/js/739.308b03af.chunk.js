"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[739],{386292:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(8145),l=n(718346),s=n(345735),o=n(811942),r=n.n(o),a=n(244414);const d=(0,l.Z)();function c(e){let{value:t,setValue:n,options:l,title:o,propr:r}=e;return(0,a.jsx)(s.A,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>d(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:l,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+r],renderOption:(e,t)=>(0,a.jsx)("li",{...e,children:t[""+r]}),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,a.jsx)(i.A,{...e,label:o||"Titre"})})}c.propType={value:r().string,setValue:r().func,options:r().array,title:r().string,propr:r().string};const p=c},615739:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var i=n(965471),l=n(244414);const s=(0,i.A)((0,l.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),o=(0,i.A)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block");var r=n(153256),a=n(783274),d=n(752472),c=n(260899),p=n(83549),h=n(314136),u=n(967807),x=n(541233),g=n(302459),v=n(150098),j=n(541397),A=n.n(j),f=n(409950),m=n(339579),S=n(482130),y=n(689505),w=n(477515),C=n(386292),b=n(315770),z=n(29246);const O=function(){const[e,t]=f.useState(""),[n,i]=f.useState(""),s=(0,m.d4)((e=>{var t;return null===(t=e.role)||void 0===t?void 0:t.role})),[o,a]=f.useState(""),d=(0,m.wA)(),[c,p]=f.useState(""),[h,x]=f.useState(""),[g,v]=f.useState(!1),[j,A]=f.useState(""),[S,O]=f.useState(!1);return f.useEffect((()=>{x(""),v(!1),A(""),O(!1),p(""),!n||"ZBM"!==(null===n||void 0===n?void 0:n.title)&&"PROCESS OFFICER"!==(null===n||void 0===n?void 0:n.title)||(async()=>{try{v(!0);const e=await z.A.get(b.UZ+"/zone");x(e.data),v(!1)}catch(e){console.log(e),v(!1)}})(),!n||"SHOP MANAGER"!==(null===n||void 0===n?void 0:n.title)&&"RS"!==(null===n||void 0===n?void 0:n.title)||(async()=>{try{O(!0);const e=await z.A.get(b.UZ+"/shop");A(e.data),O(!1)}catch(e){console.log(e),O(!1)}})()}),[n]),(0,l.jsxs)("div",{style:{width:"20rem",marginTop:"10px"},children:[(0,l.jsx)("div",{children:s&&s.length>0&&(0,l.jsx)(C.A,{value:n,setValue:i,options:s,title:"Selectionnez un Role",propr:"title"})}),g?(0,l.jsx)("p",{style:{fontSize:"12px",textAlign:"center"},children:"Loading region..."}):h&&h.length>0&&(0,l.jsx)("div",{style:{margin:"10px 0px"},children:(0,l.jsx)(C.A,{value:c,setValue:p,options:h,title:"Selectionnez la region",propr:"denomination"})}),S?(0,l.jsx)("p",{style:{fontSize:"12px",textAlign:"center"},children:"Loading shop..."}):j&&j.length>0&&(0,l.jsx)("div",{style:{margin:"10px 0px"},children:(0,l.jsx)(C.A,{value:c,setValue:p,options:j,title:"Selectionnez un Shop",propr:"shop"})}),(0,l.jsx)("div",{style:{margin:"10px 0px"},children:(0,l.jsx)(w.A,{placeholder:"Agent",value:e,onChange:e=>t(e.target.value)})}),(0,l.jsx)("div",{style:{margin:"10px 0px"},children:(0,l.jsx)(w.A,{placeholder:"Code agent",value:o,onChange:e=>a(e.target.value)})}),(0,l.jsx)("div",{children:(0,l.jsxs)(y.A,{variant:"contained",onClick:i=>(i=>{i.preventDefault();let l=["SHOP MANAGER","RS"].includes(n.title)&&(null===c||void 0===c?void 0:c.shop),s=["ZBM","PROCESS OFFICER"].includes(n.title)&&(null===c||void 0===c?void 0:c.denomination);const r={nom:e,code:o,roleSelect:n,region:s,shop:l};d((0,u._W)(r)),a(""),t("")})(i),color:"primary",fullWidth:!0,children:[(0,l.jsx)(r.A,{fontSize:"small"})," Ajouter"]})})]})};const R=function(){const[e,t]=f.useState(!1),n=(0,m.wA)(),i=(0,m.d4)((e=>e.agent)),[j,y]=f.useState(),[w,C]=x.Ay.useMessage(),b=(e,t)=>{w.open({type:t,content:""+e,duration:3})};f.useEffect((()=>{y(A().groupBy(null===i||void 0===i?void 0:i.agent,"role")),"success"===i.resetPassword&&b("Mot de passe r\xe9initialiser \xe0 1234","success"),"rejected"===i.resetPassword&&b(i.resetPasswordError,"error")}),[i]);const z=[{field:"codeAgent",headerName:"Code Agent",width:100,editable:!1},{field:"log",headerName:"First Log",width:30,editable:!1,renderCell:e=>e.row.first?(0,l.jsx)(g.A,{color:"warning"}):(0,l.jsx)(g.A,{color:"success"})},{field:"nom",headerName:"Nom",width:180,editable:!1},{field:"role",headerName:"Role",width:180,editable:!1},{field:"shop",headerName:"Shop",width:100,editable:!1,renderCell:e=>"false"!==e.row.shop&&e.row.shop},{field:"region",headerName:"Region",width:100,editable:!1,renderCell:e=>"false"!==e.row.region&&e.row.region},{field:"options",headerName:"Options",width:100,editable:!1,renderCell:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.A,{onClick:t=>(async(e,t)=>{t.preventDefault();try{n((0,u.Yn)(e))}catch(i){console.log(i)}})(e.row._id,t),title:"R\xe9initialisez ses acc\xe8s",sx:{margin:"10px"},children:(0,l.jsx)(s,{fontSize:"small"})}),(0,l.jsx)(a.A,{title:e.row.active?"Bloquer":"D\xe9bloquer",children:(0,l.jsx)(o,{fontSize:"small"})})]})}];return(0,l.jsxs)(v.A,{title:"Agents",sx:{position:"relative"},children:[C,(0,l.jsx)("div",{style:{position:"absolute",right:"50px",top:"10px"},children:(0,l.jsx)(d.A,{size:"small",color:"primary",onClick:()=>t(!0),children:(0,l.jsx)(r.A,{fontSize:"small"})})}),(0,l.jsx)("div",{children:(0,l.jsxs)(c.Ay,{container:!0,children:[(0,l.jsx)(c.Ay,{item:!0,lg:8,children:i&&(null===i||void 0===i?void 0:i.agent.length)>0&&(0,l.jsx)(h.zh,{rows:i.agent,columns:z,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10],disableRowSelectionOnClick:!0})}),(0,l.jsx)(c.Ay,{item:!0,lg:4,children:(0,l.jsx)("div",{className:"analyse",children:j&&Object.keys(j).map(((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"role",children:(0,l.jsx)(p.A,{badgeContent:j[""+e].length,color:"primary",children:e})}),j[""+e].map(((e,t)=>(0,l.jsxs)("p",{className:"name",children:[t+1,". ",e.nom]},e._id))),(0,l.jsx)("div",{})]},t)))})})]})}),(0,l.jsx)(S.A,{open:e,setOpen:t,title:"Add an agent",children:(0,l.jsx)(O,{})})]})}},482130:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(409950),l=n(463464),s=n(428170),o=n(240033),r=n(848205),a=n(186835),d=n(182053),c=n(244414);const p=i.forwardRef((function(e,t){return(0,c.jsx)(r.A,{direction:"up",ref:t,...e})}));const h=function(e){let{open:t,children:n,setOpen:i,title:r}=e;return(0,c.jsx)("div",{children:(0,c.jsxs)(l.A,{open:t,TransitionComponent:p,keepMounted:!0,onClose:()=>{i(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,c.jsxs)(o.A,{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)(d.A,{children:r}),(0,c.jsx)(a.A,{fontSize:"small",color:"secondary",style:{cursor:"pointer"},onClick:()=>i(!1)})]}),(0,c.jsx)(s.A,{children:n})]})})}},153256:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(965471),l=n(244414);const s=(0,i.A)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},186835:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(965471),l=n(244414);const s=(0,i.A)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);