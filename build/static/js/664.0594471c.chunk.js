"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[664],{386292:(e,t,n)=>{n.d(t,{A:()=>x});var s=n(8145),l=n(718346),i=n(345735),r=n(811942),o=n.n(r),a=n(244414);const c=(0,l.Z)();function d(e){let{value:t,setValue:n,options:l,title:r,propr:o}=e;return(0,a.jsx)(i.A,{value:t,onChange:(e,t)=>{"string"===typeof t?n({title:t}):t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:(e,t)=>c(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:l,getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e[""+o],renderOption:(e,t)=>(0,a.jsx)("li",{...e,children:t[""+o]}),sx:{width:"100%"},freeSolo:!0,renderInput:e=>(0,a.jsx)(s.A,{...e,label:r||"Titre"})})}d.propType={value:o().string,setValue:o().func,options:o().array,title:o().string,propr:o().string};const x=d},702564:(e,t,n)=>{n.d(t,{A:()=>r});const s=n.p+"static/media/excelIcon.9e98a29762a5db040b12.jpg";var l=n(255271),i=n(244414);const r=function(e){let{data:t,fileName:n,sheetName:r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("img",{style:{cursor:"pointer"},src:s,alt:"excel",width:60,height:30,onClick:()=>(e=>{const t=l.Wp.json_to_sheet(e),s=l.Wp.book_new();l.Wp.book_append_sheet(s,t,r),l._h(s,"".concat(n,".xlsx"))})(t)})})}},964247:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var s=n(749715),l=n(752472),i=n(260899),r=n(409950),o=n(482130),a=n(302459),c=n(541397),d=n.n(c),x=n(315770),p=n(902235),u=n(182053),h=n(775680),m=n(244414);const j=(0,r.createContext)(),A=e=>{const[t,n]=r.useState();return(0,m.jsx)(j.Provider,{value:{handleData:e=>{n(e)},data:t},children:e.children})},g=r.memo(A);const f=function(){const{data:e}=r.useContext(j),[t,n]=r.useState(),s=(0,h.d4)((e=>{var t;return null===(t=e.action)||void 0===t?void 0:t.action}));r.useEffect((()=>{e&&n(Object.keys(d().groupBy(e,"action")))}),[e]);const l=(t,n)=>{if(e&&e.length>0){let s=d().filter(e,{action:t});return(100*s.filter((e=>(0,x.Hl)(e)===n)).length/s.length).toFixed(0)+"%"}},o=e=>{var t,n;return(null===(t=d().filter(s,{title:e})[0])||void 0===t?void 0:t.roles.length)>0?null===(n=d().filter(s,{title:e})[0])||void 0===n?void 0:n.roles[0].title:""};return(0,m.jsx)("div",{children:(0,m.jsx)(i.Ay,{container:!0,children:t&&t.map(((e,t)=>(0,m.jsxs)(p.A,{sx:{padding:"5px",marginBottom:"6px",width:"100%"},children:[(0,m.jsx)(i.Ay,{className:"titleStatut",children:(0,m.jsx)(u.A,{noWrap:!0,component:"p",children:e})}),(0,m.jsxs)(i.Ay,{className:"allgrid",children:[(0,m.jsxs)(i.Ay,{className:"statutAction",children:[(0,m.jsx)(a.A,{color:"success",size:8})," ",(0,m.jsx)("p",{children:l(e,"INSLA")})]}),(0,m.jsxs)(i.Ay,{className:"statutAction",children:[(0,m.jsx)(a.A,{color:"error",size:8})," ",(0,m.jsx)("p",{children:l(e,"OUTSLA")})]}),(0,m.jsx)(i.Ay,{className:"role",children:(0,m.jsx)(u.A,{component:"p",noWrap:!0,children:o(e)})})]})]},t)))})})};var y=n(259051),v=n.n(y);const S=function(){const{data:e}=r.useContext(j),[t,n]=r.useState(),s=(0,h.d4)((e=>{var t;return null===(t=e.agent)||void 0===t?void 0:t.agent})),l=e=>{var t;if(s&&s.length>0)return null===(t=d().filter(s,{codeAgent:e})[0])||void 0===t?void 0:t.nom},o=t=>{if(e&&e.length>0){let n=d().filter(e,{codeAgent:t});return n[n.length-1].dateFin}return""};return r.useEffect((()=>{e&&e.length>0&&n(Object.keys(d().groupBy(e,"codeAgent")))}),[e]),(0,m.jsx)("div",{children:(0,m.jsx)(i.Ay,{container:!0,children:t&&t.map(((e,t)=>(0,m.jsxs)(p.A,{sx:{padding:"5px",marginBottom:"6px",width:"100%"},children:[(0,m.jsx)(i.Ay,{className:"titleStatut",children:(0,m.jsx)(u.A,{noWrap:!0,component:"p",children:l(e)})}),(0,m.jsxs)(i.Ay,{className:"role",children:[(0,m.jsx)(u.A,{component:"p",className:"lastTexte",children:"last update"}),(0,m.jsxs)(i.Ay,{noWrap:!0,className:"lastContent",children:[(0,m.jsxs)(u.A,{component:"p",children:[""!==o(e)&&new Date(o(e)).toDateString(),";"]}),(0,m.jsx)(u.A,{component:"p",style:{textAlign:"right"},children:""!==o(e)&&v()(o(e)).fromNow()})]})]})]},t)))})})};var N=n(689505),b=n(477515),C=n(386292),w=n(702564),k=n(339579),O=n(29246);const T=function(e){let{setDateSelect:t,dateSelect:n}=e;const l=(0,k.d4)((e=>{var t;return null===(t=e.role)||void 0===t?void 0:t.role})),[o,a]=r.useState(""),{handleData:c,data:d}=r.useContext(j),p=e=>{const{name:s,value:l}=e.target;t({...n,[s]:l})},[u,h]=r.useState("");return(0,m.jsx)("div",{style:{width:"30rem"},children:(0,m.jsxs)(i.Ay,{container:!0,children:[(0,m.jsx)(i.Ay,{item:!0,lg:6,xs:12,sm:6,md:6,sx:{padding:"2px"},children:(0,m.jsx)(b.A,{placeholder:"Allant du",name:"debut",onChange:e=>p(e),type:"date"})}),(0,m.jsx)(i.Ay,{item:!0,lg:6,xs:12,sm:6,md:6,sx:{padding:"2px"},children:(0,m.jsx)(b.A,{placeholder:"Au",name:"fin",onChange:e=>p(e),type:"date"})}),(0,m.jsx)(i.Ay,{item:!0,lg:6,xs:12,sm:6,md:6,sx:{padding:"2px",marginTop:"8px"},children:(0,m.jsx)(C.A,{value:o,setValue:a,options:l,title:"Role",propr:"title"})}),(0,m.jsx)(i.Ay,{item:!0,lg:3,xs:6,sm:3,md:3,sx:{padding:"2px",display:"flex",marginTop:"8px",alignItems:"center",justifyContent:"center"},children:""!==u?u:(0,m.jsx)(N.A,{fullWidth:!0,onClick:e=>(async e=>{try{h("loading..."),e.preventDefault();const t={debut:null===n||void 0===n?void 0:n.debut,fin:null===n||void 0===n?void 0:n.fin,role:null===o||""===o?"overall":null===o||void 0===o?void 0:o.title},s=await O.A.post(x.wp+"/rapport",t,x.$W);200===s.status&&(c(s.data),h(""))}catch(t){console.log(t),h("error")}})(e),color:"primary",variant:"contained",children:(0,m.jsx)(s.A,{fontSize:"small"})})}),d&&d.length>0&&(0,m.jsx)(i.Ay,{item:!0,lg:3,xs:6,sm:3,md:3,sx:{padding:"2px",display:"flex",marginTop:"8px",alignItems:"center",justifyContent:"center"},children:(0,m.jsx)(w.A,{data:d,fileName:"Actions du ".concat(n.debut," au ").concat(n.fin),title:"Excel",sheetName:"Actions"})})]})})};const W=function(){const{data:e}=r.useContext(j),[t,n]=r.useState({delai:0,hors:0});r.useEffect((()=>{(()=>{if(e&&e.length>0){let t=0,s=0;for(let n=0;n<e.length;n++)"INSLA"===(0,x.Hl)(e[n])?t+=1:s+=1;n({delai:t,hors:s})}})()}),[e]);const s=t=>{if(t&&e&&e.length>0)return(100*t/e.length).toFixed(0)+"%"};return(0,m.jsxs)(i.Ay,{container:!0,className:"container",children:[(0,m.jsx)(i.Ay,{item:!0,lg:6,xs:6,sm:12,md:6,sx:{borderRadius:{sm:"10px"},marginBottom:{sm:"7px"}},className:"grid gridinsla",children:(0,m.jsxs)("div",{children:[(0,m.jsx)(u.A,{className:"title",children:"INSLA"}),(0,m.jsx)(u.A,{className:"nombre",children:t.delai}),(0,m.jsx)(u.A,{className:"pourcentage",children:s(t.delai)})]})}),(0,m.jsx)(i.Ay,{item:!0,lg:6,xs:6,sm:12,md:6,sx:{borderRadius:{sm:"10px"}},className:"grid gridoutsla",children:(0,m.jsxs)("div",{children:[(0,m.jsx)(u.A,{className:"title",children:"OUTSLA"}),(0,m.jsx)(u.A,{className:"nombre",children:t.hors}),(0,m.jsx)(u.A,{className:"pourcentage",children:s(t.hors)})]})})]})};const z=function(){const[e,t]=r.useState(!1),[n,a]=r.useState({debut:"",fin:""});return(0,m.jsxs)(g,{children:[(0,m.jsx)("div",{style:{position:"relative"},children:(0,m.jsx)("div",{style:{position:"absolute",right:"10px"},children:(0,m.jsx)(l.A,{size:"small",color:"primary",onClick:()=>t(!0),children:(0,m.jsx)(s.A,{fontSize:"small"})})})}),(0,m.jsxs)(i.Ay,{container:!0,children:[(0,m.jsx)(i.Ay,{item:!0,lg:4,xs:12,sm:4,md:4,children:(0,m.jsx)(S,{})}),(0,m.jsx)(i.Ay,{item:!0,lg:3,xs:12,sm:2,md:2,sx:{padding:"0px 3px",marginBottom:{xs:"10px"}},children:(0,m.jsx)(W,{})}),(0,m.jsx)(i.Ay,{item:!0,lg:5,xs:12,sm:6,md:6,children:(0,m.jsx)(f,{})})]}),(0,m.jsx)(o.A,{open:e,setOpen:t,title:"Recherche",children:(0,m.jsx)(T,{setDateSelect:a,dateSelect:n})})]})}},482130:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(409950),l=n(463464),i=n(428170),r=n(240033),o=n(848205),a=n(186835),c=n(182053),d=n(244414);const x=s.forwardRef((function(e,t){return(0,d.jsx)(o.A,{direction:"up",ref:t,...e})}));const p=function(e){let{open:t,children:n,setOpen:s,title:o}=e;return(0,d.jsx)("div",{children:(0,d.jsxs)(l.A,{open:t,TransitionComponent:x,keepMounted:!0,onClose:()=>{s(!1)},"aria-describedby":"alert-dialog-slide-description",children:[(0,d.jsxs)(r.A,{style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsx)(c.A,{children:o}),(0,d.jsx)(a.A,{fontSize:"small",color:"secondary",style:{cursor:"pointer"},onClick:()=>s(!1)})]}),(0,d.jsx)(i.A,{children:n})]})})}},186835:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(965471),l=n(244414);const i=(0,s.A)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},749715:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(965471),l=n(244414);const i=(0,s.A)((0,l.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);